[gd_scene load_steps=16 format=3 uid="uid://dsc5xctxffds1"]

[ext_resource type="Script" path="res://level/level1.gd" id="1_dtbbj"]
[ext_resource type="AudioStream" uid="uid://sbkmh7lxlta6" path="res://level2/Goodnightmare.mp3" id="2_emeu6"]
[ext_resource type="Script" path="res://player.gd" id="3_dout2"]
[ext_resource type="PackedScene" uid="uid://die3q8qjh2fe5" path="res://hud/hud.tscn" id="4_svkcw"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="6_gmqx4"]
[ext_resource type="MeshLibrary" uid="uid://dqwjgvh4mo64s" path="res://addons/kaykit_city_builder_bits/kaykit_city.meshlib" id="7_32815"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3D.gd" id="7_jgjij"]
[ext_resource type="Script" path="res://shot_target.gd" id="9_1f53j"]
[ext_resource type="PackedScene" uid="uid://cth06yd5re42s" path="res://addons/kaykit_prototype_bits/Assets/gltf/target_small.gltf" id="9_ym7id"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_7qv1v"]
noise_type = 3
seed = 1
frequency = 0.0741
domain_warp_enabled = true
domain_warp_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_ly38d"]
noise = SubResource("FastNoiseLite_7qv1v")

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_8ra1h"]
sky_top_color = Color(0.027451, 0.0196078, 0.172549, 1)
sky_horizon_color = Color(0.305882, 0.145098, 0.258824, 1)
sky_curve = 0.0100478
sky_cover = SubResource("NoiseTexture2D_ly38d")
sky_cover_modulate = Color(1, 1, 1, 0.0117647)
ground_bottom_color = Color(0.184314, 0.196078, 0.196078, 1)
ground_horizon_color = Color(0.164706, 0.0588235, 0.0823529, 1)
sun_angle_max = 4.0
sun_curve = 2457.6

[sub_resource type="Sky" id="Sky_7l36k"]
sky_material = SubResource("ProceduralSkyMaterial_8ra1h")

[sub_resource type="Environment" id="Environment_jpfqm"]
background_mode = 2
sky = SubResource("Sky_7l36k")
ambient_light_source = 2
ambient_light_color = Color(0.0470588, 0.0470588, 0.0470588, 1)
reflected_light_source = 2
sdfgi_enabled = true
sdfgi_bounce_feedback = 0.08
fog_light_color = Color(0.176471, 0.188235, 0.207843, 1)
fog_density = 0.1012
fog_sky_affect = 0.5

[sub_resource type="CylinderShape3D" id="CylinderShape3D_0r26x"]
height = 0.104286
radius = 0.19424

[node name="Level2" type="Node3D"]
script = ExtResource("1_dtbbj")
total_bullets = 6

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_jpfqm")

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("2_emeu6")
autoplay = true
bus = &"Music"

[node name="Player" type="Node3D" parent="."]
script = ExtResource("3_dout2")
bullet_collision_mask = 16

[node name="Sfx" type="AudioStreamPlayer" parent="Player"]
bus = &"Effects"

[node name="Voice" type="AudioStreamPlayer" parent="Player"]
bus = &"Voice"

[node name="HUD" parent="Player" instance=ExtResource("4_svkcw")]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.71221, 1.30136, 0)
current = true
fov = 74.0744

[node name="PhantomCameraHost" type="Node" parent="Camera3D"]
script = ExtResource("6_gmqx4")

[node name="Shots" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)

[node name="Section1" type="Node3D" parent="Shots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.71221, -0.698638, 0)
script = ExtResource("7_jgjij")
priority_override = false
priority = 1
follow_mode = 0
look_at_mode = 0
tween_parameters = null
tween_on_load = true
inactive_update_mode = 0
camera_3D_resource = null

[node name="Walls" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.125, 0)
mesh_library = ExtResource("7_32815")
cell_size = Vector3(4, 4, 4)
cell_scale = 2.0

[node name="Objects" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
mesh_library = ExtResource("7_32815")
cell_size = Vector3(1, 1, 1)
cell_scale = 2.0
data = {
"cells": PackedInt32Array(3, 65524, 1441829, 0, 65523, 655397, 3, 65520, 37, 0, 65520, 1048613)
}

[node name="Floors" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.125, 0)
mesh_library = ExtResource("7_32815")
cell_size = Vector3(4, 4, 4)
cell_scale = 2.0
data = {
"cells": PackedInt32Array(0, 65533, 31, 0, 65534, 32, 0, 0, 31, 0, 1, 31, 0, 65532, 30, 0, 65531, 31, 0, 65530, 31, 0, 65529, 31, 0, 65528, 31, 0, 65527, 655390, 0, 65526, 31, 0, 65525, 31, 0, 65524, 31, 0, 65523, 655393, 0, 65522, 31, 0, 65521, 31, 0, 65520, 31, 0, 65519, 31, 0, 65518, 31, 0, 65517, 655390, 0, 65516, 31, 0, 65515, 31, 0, 65514, 31, 0, 65513, 31, 0, 65535, 31, 65535, 65532, 1441823, 1, 65532, 1441823, 65534, 65532, 1441823, 65533, 65532, 1441823, 65532, 65532, 1441823, 65531, 65532, 1441823, 65530, 65532, 1441823, 2, 65532, 1441823, 3, 65532, 1441823, 4, 65532, 1441823, 65529, 65532, 28, 1, 65517, 1048607, 65535, 65517, 1048607, 65535, 65523, 1048607, 65534, 65523, 1048607, 5, 65529, 31, 5, 65528, 31, 1, 65527, 1441823, 2, 65527, 1441823, 3, 65527, 1441823, 4, 65527, 1441823, 65535, 65527, 1441823, 65534, 65527, 1441823, 65533, 65527, 1441823, 65532, 65527, 1441823, 65531, 65527, 1441823, 65533, 65523, 1441823, 65532, 65523, 1441823, 65531, 65523, 1441823, 65529, 65533, 655391, 65529, 65534, 655391, 65529, 65535, 655391, 1, 65531, 6, 3, 65526, 6, 65531, 65526, 6, 65531, 65522, 6, 65533, 65531, 6, 65530, 65531, 6, 65535, 65533, 1048582, 65533, 65524, 655366, 65535, 65528, 1048582, 1, 65521, 1441798, 65535, 65518, 1048582, 65535, 65513, 1048582, 1, 65515, 1441798, 4, 65530, 1048582, 3, 65531, 6, 65535, 65535, 1048582, 1, 1, 1441798, 65535, 65534, 1048594, 2, 65531, 8, 4, 65528, 1048584, 1, 65526, 1441800, 65535, 65526, 8, 1, 65523, 1441800, 65534, 65522, 8, 65533, 65526, 14, 65532, 65528, 655368, 65531, 65533, 655368, 65534, 65533, 655368, 1, 65533, 1441800, 1, 65534, 1441802, 4, 65531, 10, 2, 65528, 655370, 65533, 65528, 655370, 65535, 65531, 1048586, 65535, 65529, 1048586, 1, 65530, 1441802, 1, 65524, 1441808, 65535, 65524, 1048586, 65535, 65521, 1048586, 65535, 65519, 1048586, 1, 65518, 1441802, 65535, 65514, 1048586, 65535, 1, 1048586, 65532, 65533, 655370, 65531, 65531, 10, 65532, 65531, 12, 65534, 65531, 12, 65533, 65533, 655372, 1, 65535, 1441804, 2, 65533, 655372, 65535, 0, 1048588, 1, 0, 1441806, 3, 65533, 655374, 4, 65526, 12, 2, 65526, 14, 65534, 65526, 12, 65532, 65526, 8, 4, 65529, 1048592, 3, 65528, 655376, 65534, 65528, 655376, 1, 65529, 1441808, 1, 65525, 1441808, 1, 65519, 1441808, 65535, 65516, 1048592, 65535, 65530, 1048594, 65535, 65522, 1048594, 65535, 65515, 1048594, 1, 65528, 1441810, 65535, 65525, 1048594, 65535, 65520, 1048594, 1, 65520, 1441810, 1, 65522, 1441806, 1, 65516, 1441806, 1, 65513, 1441806, 1, 65514, 1441808, 5, 65527, 1441821, 65530, 65527, 1048605, 65530, 65526, 31, 65530, 65524, 31, 65530, 65525, 655393, 65530, 65523, 29, 65529, 65525, 1441823, 65528, 65525, 1441823, 65527, 65525, 1048604, 2, 65517, 1048607, 3, 65517, 1048607, 4, 65517, 1048607, 5, 65517, 1048607, 65534, 65517, 1048607, 65533, 65517, 1048607, 65532, 65517, 1048607, 65531, 65517, 1048607, 65530, 65517, 1048607, 65529, 65517, 1048607, 6, 65517, 1048607, 65531, 65510, 11, 65532, 65510, 9, 65533, 65510, 9, 65534, 65510, 13, 65535, 65510, 9, 0, 65510, 13, 1, 65510, 11, 2, 65510, 11, 2, 65511, 11, 3, 65511, 9, 3, 65510, 9, 4, 65510, 11, 3, 65508, 11, 2, 65508, 11, 1, 65508, 11, 0, 65508, 11, 65535, 65508, 11, 65534, 65508, 11, 65533, 65508, 11, 65532, 65508, 11, 65531, 65508, 11, 65534, 65509, 13, 65535, 65509, 13, 0, 65509, 11, 1, 65509, 11, 2, 65509, 11, 3, 65509, 11, 4, 65509, 11, 65532, 65509, 13, 65533, 65509, 13, 0, 65511, 9, 6, 65510, 15, 5, 65510, 15, 65530, 65509, 15, 65529, 65510, 15, 65533, 65511, 15, 2, 65516, 18, 3, 65516, 14, 4, 65516, 10, 5, 65516, 14, 6, 65516, 12, 65534, 65516, 12, 65533, 65516, 10, 65532, 65516, 12, 65531, 65516, 18, 65530, 65516, 12, 65529, 65516, 10, 2, 65518, 655372, 3, 65518, 655378, 4, 65518, 655370, 5, 65518, 655370, 6, 65518, 655372, 65534, 65518, 655378, 65533, 65518, 655376, 65529, 65518, 655370, 65530, 65518, 655372, 65531, 65518, 655372, 65532, 65518, 655370, 6, 65527, 1441802, 5, 65526, 10, 6, 65526, 655370, 65529, 65522, 655370, 6, 65533, 1048592, 6, 65529, 1441808, 6, 65531, 1441808, 65530, 65533, 655376, 65528, 65531, 655376, 65529, 65531, 18, 65528, 65534, 1048594, 65530, 65535, 1441810, 65530, 65534, 1441808, 65528, 65535, 1048592, 65528, 65533, 1048592, 65528, 65532, 1048586, 65529, 65526, 1048586, 65529, 65523, 1048586, 65529, 65524, 1048586, 65531, 65528, 655370, 65532, 65524, 655370, 65533, 65522, 10, 65532, 65522, 10, 4, 65533, 655370, 6, 65532, 1441802, 6, 65530, 1441802, 6, 65528, 1441802, 5, 65530, 655391, 5, 65531, 655391, 5, 65532, 655389, 5, 65533, 655378, 65534, 65534, 655378, 65533, 65534, 655378, 65532, 65534, 655378, 65531, 65534, 655378, 2, 65534, 655378, 2, 65535, 655378, 3, 65534, 655378, 2, 65529, 655378, 3, 65530, 655378, 65534, 65530, 655378, 65532, 65529, 655378, 65531, 65530, 655378, 65533, 65530, 655378, 65529, 65529, 655378, 4, 65524, 655378, 3, 65522, 655378, 6, 65520, 655378, 6, 65523, 655378, 65532, 65520, 655378, 65529, 65520, 655378, 65530, 65522, 18, 65531, 65524, 655378, 65534, 65524, 655378, 65531, 65525, 1441808, 65529, 65527, 1048592, 65530, 65528, 655374, 65531, 65520, 1048590, 65534, 65521, 1048590, 65533, 65519, 1048590, 65534, 65519, 1048590, 65533, 65521, 16, 2, 65520, 16, 2, 65524, 16, 2, 65521, 1048594, 2, 65523, 1048594, 3, 65525, 1048594, 6, 65525, 1048594, 7, 65528, 1048594, 8, 65526, 1048594, 7, 65531, 1048594, 8, 65529, 1048594)
}

[node name="Items" type="Node3D" parent="."]

[node name="target_small2" parent="Items" instance=ExtResource("9_ym7id")]
transform = Transform3D(0.836976, 0, -0.54724, 0, 1, 0, 0.54724, 0, 0.836976, 3.621, 0, -4.359)

[node name="Small Target" type="Area3D" parent="Items/target_small2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.828559, 0)
collision_layer = 16
collision_mask = 8
script = ExtResource("9_1f53j")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Items/target_small2/Small Target"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0.000308633, 0.030732, 0.0973968)
shape = SubResource("CylinderShape3D_0r26x")

[connection signal="reloaded" from="Player" to="Player/HUD" method="_on_player_reloaded"]
[connection signal="shot_fired" from="Player" to="Player/HUD" method="_on_player_shot_fired"]
[connection signal="target_shot" from="Items/target_small2/Small Target" to="." method="_on_target_shot"]
